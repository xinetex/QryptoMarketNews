<?xml version="1.0" encoding="UTF-8"?>
<!-- QChannel MainScene - TV News Style Layout -->
<component name="MainScene" extends="Scene">
    <interface>
        <field id="selectedZone" type="node" />
        <!-- Voice & Second Screen Support -->
        <field id="voiceQuery" type="string" onChange="onVoiceQuery" />
        <field id="deviceId" type="string" />
        <field id="pairingToken" type="string" />
        <field id="deepLink" type="assocarray" onChange="onDeepLink" />
        <field id="ecpAction" type="string" onChange="onEcpAction" />
        <field id="launchMode" type="string" onChange="onLaunchModeChanged" />
    </interface>

    <script type="text/brightscript" uri="MainScene.brs" />

    <children>
        <!-- PROPHET OS: Background (Zinc 950) -->
        <Rectangle id="backgroundRect"
            width="1920"
            height="1080"
            color="#09090b" />
            
        <!-- SIDEBAR: FLEXNAV (Fixed Left, 320px) -->
        <Rectangle 
            width="320" 
            height="1080" 
            color="#18181b" 
            translation="[0,0]" />
        <!-- Sidebar Border -->
        <Rectangle width="1" height="1080" color="#ffffff10" translation="[320,0]" />

        <!-- Sidebar Content -->
        <Group id="sidebarGroup" translation="[40,60]">
            <!-- Brand -->
            <Label text="PROPHET" font="font:LargeBoldSystemFont" color="#ffffff" />
            <Label text="INTELLIGENCE" font="font:SmallSystemFont" color="#a1a1aa" translation="[0,45]" />

            <!-- Menu Items -->
            <!-- Menu Items -->
            <LabelList 
                id="mainMenu"
                translation="[0,150]"
                itemSize="[320, 60]"
                itemSpacing="[0,10]"
                drawFocusFeedback="false"
                focusedColor="#10b981"
                color="#71717a"
                vertFocusAnimationStyle="fixedFocusWrap" />

            <!-- Bottom Status -->
            <Group translation="[0,850]">
                <Label text="SYSTEM: ONLINE" font="font:SmallestSystemFont" color="#10b981" />
                <Label text="v1.0.4-alpha" font="font:SmallestSystemFont" color="#52525b" translation="[0,25]" />
            </Group>
        </Group>

        <!-- MAIN CONTENT AREA (Offset: 340px) -->
        
        <!-- Top HUD (Replaces Header) -->
        <Group translation="[360, 40]">
            <!-- Path / Breadcrumbs -->
            <Label text="HOME // DASHBOARD" font="font:SmallBoldSystemFont" color="#52525b" />
            
            <!-- Alpha HUD (Top Right) -->
            <AlphaHUD id="alphaHud" translation="[1120, 0]" />
        </Group>

        <!-- Content Groups -->
        <Group id="mainContent" translation="[360, 160]">
            
            <!-- 1. RSVP Display (Featured Top) -->
            <RSVPDisplay id="rsvpDisplay" translation="[0, 0]" />

            <!-- 2. Zone Grid (Below RSVP) -->
            <Label text="ACTIVE ZONES" font="font:SmallBoldSystemFont" color="#71717a" translation="[0, 340]" />
            
            <MarkupGrid id="zoneGrid"
                translation="[0,380]"
                itemComponentName="ZoneCard"
                numColumns="4"
                numRows="1"
                itemSize="[310,240]"
                itemSpacing="[20,20]"
                focusable="true" />
        </Group>

        <!-- Crypto Service (Invisible) -->
        <CryptoService id="cryptoService" />

        <!-- Sentinel Alert Overlay -->
        <TVAlert id="tvAlert" />

        <!-- Device Linking Overlay -->
        <DeviceLinkScene id="deviceLinkScene" visible="false" />

        <!-- Transition Overlay -->
        <Rectangle 
            id="transitionOverlay" 
            width="1920" 
            height="1080" 
            color="#000000" 
            opacity="0.0" 
            visible="false" />

        <!-- Watchlist Layer -->
        <WatchlistLayer id="watchlistLayer" visible="false" />

        <!-- MoltConnect Module (Agent Hardware Interface) -->
        <MoltConnect id="moltConnect" />

        <!-- Fade Animation -->
        <Animation id="fadeAnimation" duration="0.4" easeFunction="linear">
            <FloatFieldInterpolator 
                key="[0.0, 0.5, 1.0]" 
                keyValue="[0.0, 1.0, 0.0]" 
                fieldToInterp="transitionOverlay.opacity" />
        </Animation>
    </children>
</component>
